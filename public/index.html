
<!DOCTYPE html>
<!--
	Dok-gamelib engine

	Description: Dobuki game
	Author: jacklehamster
	Sourcode: https://github.com/jacklehamster/dok-game
	Year: 2021
 -->
<html lang="en">
	<head>
		<script type="text/javascript" src="lib/utils/chrono-utils-self-load.js">
			</script>
        <title>Dobuki Game</title>
		<meta charset="utf-8"/>
		<meta name="description" content="Dobuki Game Description">
		<link rel="stylesheet" href="css/style.css">

		<script>
			addEventListener('error', function(event) {
				const div = document.body.appendChild(document.createElement("div"));
				div.id = "errorView";
				div.style.position = "absolute";
				div.style.top = "0px";
				div.style.left = "0px";
				div.style.userSelect = "none";
				div.style.pointerEvents = "none";
				div.style.color = "#FF0000cc";
				div.style.backgroundColor = "#660000cc";
				div.style.zIndex = 200;
				div.textContent = event.error.stack;
			});
		</script>
		<script>
			function showUnlockedMedal(medal) {
				const div = document.getElementById("medalView") || document.body.appendChild(document.createElement("div"));
				div.style.display = "";
				div.id = "medalView";
				div.style.position = "absolute";
				div.style.top = "0px";
				div.style.left = "0px";
				div.style.width = "100%";
				div.style.textAlign = "center";
				div.style.userSelect = "none";
				div.style.pointerEvents = "none";
				div.style.color = "#eeFF00cc";
				div.style.backgroundColor = "#666600cc";
				div.style.zIndex = 200;
				div.textContent = `ü•á You unlocked a new medal: ${medal}`;
				setTimeout(() => {
					div.style.display = "none";
				}, 5000);
			}
		</script>
		<script>
			function showNotice(message, time) {
				const div = document.getElementById("messageView") || document.body.appendChild(document.createElement("div"));
				div.style.display = "";
				div.id = "messageView";
				div.style.position = "absolute";
				div.style.top = "0px";
				div.style.left = "0px";
				div.style.width = "100%";
				div.style.textAlign = "center";
				div.style.userSelect = "none";
				div.style.pointerEvents = "none";
				div.style.color = "#eeFFeecc";
				div.style.backgroundColor = "#6600cc";
				div.style.zIndex = 200;
				div.innerText = `${message}`;
				setTimeout(() => {
					div.style.display = "none";
				}, 5000 * time);
			}
		</script>
		<script>
			addEventListener('online', () => console.log('Online:' + navigator.onLine));
			addEventListener('offline', () => console.log('Online:' + navigator.onLine));
		</script>
	</head>
	<body>
		<div id="game-tab" style="margin-left: 80px;"></div>
		<img class="incept" id="player-overlay" style="z-index: 200; display: none; touch-action:none; pointer-events: none; position: absolute; top: 50px; left: 100px; width: 800px; height: 400px; outline: 3px solid black" src="assets/monkor-overlay.png"></img>
		<img class="incept inceptback" id="back-button" style="z-index: 201; display: none; position: absolute; top: 350px; left: 800px; width: 100px; height: 100px;
			cursor:url(assets/pointer-cursor.png), auto;" src="assets/back-button.png"></img>
		<script type="text/javascript">
			const backButton = document.getElementById("back-button");
			function doResize() {
				if (document.getElementById("canvas")) {
					const rect = document.getElementById("canvas").getBoundingClientRect();
					const shift = -200;
					const sidebarShift = -220;
					document.getElementById("player-overlay").style.left = `${rect.x + shift + 50}px`;
					document.getElementById("back-button").style.left = `${rect.x + shift + 750}px`;
					document.getElementById("player-overlay").style.top = `${rect.y + shift + 150}px`;
					document.getElementById("back-button").style.top = `${rect.y + shift + 450}px`;
				}
			}
			window.addEventListener("resize", doResize);
		</script>

		<div style="position: absolute; left: 10px; top: 60px; z-index: 100; font-size: 8pt;">
			<div id="sidebar" style="flex-direction: column; display: flex; display: none; cursor:url(assets/mouse-cursor.png), auto;">
				<div class="sidebar-room">1</div>
				<div class="sidebar-room">2</div>
			</div>
		</div>



		<div id="container" class="container">
			<div class="speech-bubble" id="speech-bubble" style="left: 50px;"></div>

			<!-- https://www.beepbox.co/#8n31sbk0l00e0ft3em0a7g0fj07i0r1o3210T5v0L4u50q1d5f8y1z6C1c0h0H-JJAArrqiih999T6v1L4u77q1d1f7y4z1C1c2W79T1v0L4u55q1d1f9y0z6C1c0A4F2B4V1Q40c0Pd73bE0111T3v3L4u03q0d1f8y0z1C2S-JIAArrrrrqiiiib4x8Qd18ilBoi4zgR4x8Qd14h8Och4icz4h4h414h4h0p23dFE-y-y38X2eQzEF8W2eH04t17hihO97ghQkRkRqGa2e2FKI8W2eyMzG8Zd517rj8Op7ghQkRkQWiewzEAieIzEbWyeAzRlmSng5dlJJJtBJd9jpvhSqq_3FU2tDwdv9ePMaDmt_v9YEUeEUckR_52qfiwcEWv2koz0phvgnQp2z4rsGwUY5Cz0K8WkkQpk0hQklAt17mhQ4o0 -->
			<div id="title" class="title" style="user-select: text; position: absolute; top: 80px; left:310px; z-index: 300; font-size: 40pt"><span id="im" spellcheck="false" contenteditable="true" style="display:none">THE IMPOSSIBLE ROOM</span></div>

			<div id="overlay" ondrop="engine.onDropOnOverlay(event)" ondragover="event.preventDefault(); engine.onDragOver(event)"></div>
			<div id="game-over"></div>
			<div class="centered" id="game-over-message"></div>
			<button id="restart" class="centered restart">restart</button>

			<div id="confirm-dialog" class="centered" style="margin-top: -150px; margin-left: -250px; display: none">
				<div id="confirm-text" style="margin-bottom: 20px; font-size: 15pt;">Are you sure you want to restart the game?</div>
				<button id="ok-button" class="button">ok</button>
				<button id="cancel-button" class="button">cancel</button>
			</div>

			<div id="over-container" style="z-index: 300;position: absolute; top: 50px; left: 150px">
			</div>
			<canvas id="canvas"  ondrop="console.log(event)" style="position: absolute; top: 50px; left: 100px" width=64 height=64></canvas>
 			<div id="actions" style="position: absolute; top: 460px; left: 400px; display: flex; flex-direction: : horizontal; z-index: 121;">
				<div id="subject" class="subject">
					<div id="subject-name"></div>
				</div>
				<div class="actions" id="subject-actions"></div>
			</div>
			<div id="inventory" style="position: absolute; top: 460px; left: 100px; z-index: 141; display: flex; flex-direction: horizontal">
			</div>
			<div id="controls" style="position: absolute; top: 490px; left: 100px; z-index: 131; display: none">
				<div style="display: flex; flex-direction: row">
					<div id="mouse" class="mouse" style="width: 20px; height: 20px" draggable="true"
					ondragstart="event.dataTransfer.setData('item', 'mouse'); event.dataTransfer.effectAllowed = 'move'; setTimeout(() => event.srcElement.style.opacity = 0, 1)" ondragend="setTimeout(() => {
							if (!engine.game.mouse.alive) {
								event.srcElement.style.opacity = 1;
							}
					}, 1)"
					>üêÅ</div>
					<div>: Use mouse to move <span id="player-name">Monkor</span>.</div>
				</div>
				<div>
					<a id="mute-toggle" style="cursor:url(assets/pointer-cursor.png), auto;"><span id="speaker">üö´üéµ</span>: Press M to <span id="mute">unmute music</span></a>
				</div>
				<div>
					<a id="sfx-toggle" style="cursor:url(assets/pointer-cursor.png), auto;"><span id="sfx-speaker">üîä</span>: Press S to <span id="sfx-mute">mute SFX</span></a>
				</div>
				<div>
					<a id="voice-mute-toggle" style="cursor:url(assets/pointer-cursor.png), auto;"><span id="voice-speaker">üòÆ</span>: Press V to <span id="voice-mute">mute voice</span>
					</a>
					<span id="voice-selector">
						/ <label for="voice-drop">Change voice:</label>
							<select id="voice-drop">
							  <option value="default">default</option>
							</select>
					</span>
				</div>
			</div>
		</div>
		<!-- JAVASCRIPT -->
		<script type="text/javascript" src="gen/asset-md5.js"></script>
		<script type="text/javascript" src="gen/compact.js"></script>
		<script type="text/javascript" src="gen/data.js"></script>
		<script type="text/javascript" src="gen/files.js"></script>
		<script type="text/javascript" src="gen/nameToClass.js"></script>
		<script type="text/javascript" src="lib/external/math/gl-matrix-min.js"></script>
		<script type="text/javascript" src="lib/external/math/gl-matrix.js"></script>
		<script type="text/javascript" src="lib/external/newgrounds/newgroundsio.min.js"></script>
		<script type="text/javascript" src="lib/external/peerjs/peerjs.min.js"></script>
		<script type="text/javascript" src="lib/external/dok-lib.js"></script>
		<script type="text/javascript" src="lib/core/game-base.js"></script>
		<script type="text/javascript" src="lib/map/generator/base/generator.js"></script>
		<script type="text/javascript" src="lib/sprite/aux/base/auxiliary.js"></script>
		<script type="text/javascript" src="lib/sprite/aux/base/refresher-auxiliary.js"></script>
		<script type="text/javascript" src="games/demo/base/flat-land.js"></script>
		<script type="text/javascript" src="games/demo/base/game-ring.js"></script>
		<script type="text/javascript" src="games/demo/base/smurf.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/base/game-core.js"></script>
		<script type="text/javascript" src="games/turtle/base/world-of-turtle.js"></script>
		<script type="text/javascript" src="lib/map/generator/generator-from-config.js"></script>
		<script type="text/javascript" src="lib/map/generator/moving-platform-generator.js"></script>
		<script type="text/javascript" src="lib/map/generator/null-generator.js"></script>
		<script type="text/javascript" src="lib/physics/base/physics-base.js"></script>
		<script type="text/javascript" src="lib/sprite/aux/bouncer-auxiliary.js"></script>
		<script type="text/javascript" src="lib/sprite/aux/collectible-auxiliary.js"></script>
		<script type="text/javascript" src="lib/sprite/aux/door-auxiliary.js"></script>
		<script type="text/javascript" src="lib/sprite/aux/highlight-auxiliary.js"></script>
		<script type="text/javascript" src="lib/sprite/aux/landing-auxiliary.js"></script>
		<script type="text/javascript" src="lib/sprite/aux/low-ceiling-auxiliary.js"></script>
		<script type="text/javascript" src="lib/sprite/aux/mouse-pointer-auxiliary.js"></script>
		<script type="text/javascript" src="lib/sprite/aux/npc-auxiliary.js"></script>
		<script type="text/javascript" src="lib/sprite/aux/platform-block-auxiliary.js"></script>
		<script type="text/javascript" src="lib/sprite/aux/platform-gridcell-position-auxiliary.js"></script>
		<script type="text/javascript" src="lib/sprite/aux/platform-hero-auxiliary.js"></script>
		<script type="text/javascript" src="lib/sprite/aux/selection-box-auxiliary.js"></script>
		<script type="text/javascript" src="lib/sprite/base/body.js"></script>
		<script type="text/javascript" src="lib/sprite/base/sprite.js"></script>
		<script type="text/javascript" src="lib/sprite/collision/collision-box-display.js"></script>
		<script type="text/javascript" src="lib/sprite/collision/collision-box.js"></script>
		<script type="text/javascript" src="lib/sprite/collision/collision-merger.js"></script>
		<script type="text/javascript" src="lib/ui/base/ui-component.js"></script>
		<script type="text/javascript" src="games/common/start-screen.js"></script>
		<script type="text/javascript" src="games/demo/peer-demo.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/animal-room.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/batman-room.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/clue-room.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/computer-room.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/desert-exit.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/desert-far.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/desert-room.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/entrance.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/game-title.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/gandalf-room.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/impossible-room.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/joker-room.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/lobby.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/locked-room.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/mall.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/math-room.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/menu.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/restaurant.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/restroom.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/selection.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/sound-room.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/template.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/time-room.js"></script>
		<script type="text/javascript" src="games/the-impossible-room/tv-room.js"></script>
		<script type="text/javascript" src="lib/lang/translate-voice.js"></script>
		<script type="text/javascript" src="lib/map/sprite-grid.js"></script>
		<script type="text/javascript" src="lib/map/sprite-mapper.js"></script>
		<script type="text/javascript" src="lib/newgrounds/ng.js"></script>
		<script type="text/javascript" src="lib/opengl/buffer-renderer.js"></script>
		<script type="text/javascript" src="lib/opengl/shader.js"></script>
		<script type="text/javascript" src="lib/opengl/utils.js"></script>
		<script type="text/javascript" src="lib/physics/collision.js"></script>
		<script type="text/javascript" src="lib/physics/control-8.js"></script>
		<script type="text/javascript" src="lib/physics/control.js"></script>
		<script type="text/javascript" src="lib/physics/movement.js"></script>
		<script type="text/javascript" src="lib/physics/overworld-gravity.js"></script>
		<script type="text/javascript" src="lib/physics/platform-gravity.js"></script>
		<script type="text/javascript" src="lib/physics/platform-jump.js"></script>
		<script type="text/javascript" src="lib/renderer/sprite-renderer.js"></script>
		<script type="text/javascript" src="lib/sound/music.js"></script>
		<script type="text/javascript" src="lib/sound/sound-manager.js"></script>
		<script type="text/javascript" src="lib/sound/sound.js"></script>
		<script type="text/javascript" src="lib/sound/voice-manager.js"></script>
		<script type="text/javascript" src="lib/sprite/hud.js"></script>
		<script type="text/javascript" src="lib/sprite/shadow.js"></script>
		<script type="text/javascript" src="lib/sprite/sprite-collection.js"></script>
		<script type="text/javascript" src="lib/sprite/sprite-factory.js"></script>
		<script type="text/javascript" src="lib/texture/collision-box-calculator.js"></script>
		<script type="text/javascript" src="lib/texture/texture-atlas.js"></script>
		<script type="text/javascript" src="lib/texture/texture-manager.js"></script>
		<script type="text/javascript" src="lib/ui/drag-drop.js"></script>
		<script type="text/javascript" src="lib/ui/focus-fixer.js"></script>
		<script type="text/javascript" src="lib/ui/fps-box.js"></script>
		<script type="text/javascript" src="lib/ui/keyboard-handler.js"></script>
		<script type="text/javascript" src="lib/ui/mouse-handler-manager.js"></script>
		<script type="text/javascript" src="lib/ui/player-overlay.js"></script>
		<script type="text/javascript" src="lib/ui/scene-tab.js"></script>
		<script type="text/javascript" src="lib/ui/side-bar.js"></script>
		<script type="text/javascript" src="lib/ui/sidebar.js"></script>
		<script type="text/javascript" src="lib/ui/tip-box.js"></script>
		<script type="text/javascript" src="lib/utils/array-utils.js"></script>
		<script type="text/javascript" src="lib/utils/constants.js"></script>
		<script type="text/javascript" src="lib/utils/random-utils.js"></script>
		<script type="text/javascript" src="lib/utils/string.js"></script>
		<script type="text/javascript" src="lib/utils/value-refresher.js"></script>
		<script type="text/javascript" src="lib/engine.js"></script>
		<script type="text/javascript" src="game-starter.js"></script>
		<!-- JAVASCRIPT -->
	</body>
</html>
